<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ðŸ”§ CGH Technik Planer</title>

<!-- Supabase korrekt mit defer -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2" defer></script>

<style>
body { font-family: Arial, sans-serif; background:#f5f5f5; margin:0; padding:20px; }
.hidden { display:none; }
</style>
</head>

<body>

<!-- LOGIN -->
<div id="login-view">
    <h2>ðŸ”§ CGH Technik Planer</h2>
    <p>Login geladen (Fallback aktiv)</p>
</div>

<!-- REGISTER -->
<div id="register-view" class="hidden"></div>

<!-- APP -->
<div id="app-view" class="hidden"></div>

<script defer>
/* ======================================================
   CGH TECHNIK PLANER â€“ GITHUB PAGES FIXED VERSION
   ====================================================== */

const SUPABASE_URL = 'https://orcpugfqltiljnvlitsn.supabase.co';
const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...';

let supabase = null;

const APP = {
    currentUser: null,
    isAdmin: false
};

function show(view) {
    ['login-view','register-view','app-view'].forEach(id => {
        document.getElementById(id).classList.add('hidden');
    });
    document.getElementById(view).classList.remove('hidden');
}

async function init() {
    try {
        if (!window.supabase) throw new Error("Supabase nicht geladen");

        supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
        console.log("Supabase OK");

        show('login-view');
    } catch (err) {
        console.error(err);
        show('login-view');
    }
}

/* White Screen Schutz */
window.onerror = function () {
    show('login-view');
};

document.addEventListener('DOMContentLoaded', init);
</script>

</body>
</html>
