<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ðŸ”§ CGH Technik Planer</title>

    <!-- Supabase MIT defer -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2" defer></script>
</head>
<body>

<div id="login-view">
    <h2>ðŸ”§ CGH Technik Planer</h2>
    <p>Login-Ansicht (Fallback sichtbar)</p>
</div>

<script defer>
/* ===== SICHERER INIT-FIX ===== */

const SUPABASE_URL = 'https://orcpugfqltiljnvlitsn.supabase.co';
const SUPABASE_KEY = 'DEIN_SUPABASE_KEY_HIER';

let supabase = null;

function showLogin() {
    document.getElementById('login-view').style.display = 'block';
}

async function init() {
    try {
        if (!window.supabase) {
            throw new Error("Supabase nicht geladen");
        }

        supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

        // Test-Query (optional)
        console.log("Supabase bereit:", supabase);

        showLogin();
    } catch (e) {
        console.error("Init Fehler:", e);
        showLogin();
    }
}

// Globaler Fallback gegen White Screen
window.onerror = function () {
    showLogin();
};

init();
</script>

</body>
</html>
